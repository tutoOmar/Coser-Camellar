<section class="bg-gray-50 dark:bg-gray-900">
  <div
    class="flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"
  >
    <a
      href="#"
      class="flex items-center mb-6 text-2xl font-semibold text-gray-900 dark:text-white"
    >
      <img
        class="w-8 h-8 mr-2"
        style="width: 100px; height: 100px"
        src="https://firebasestorage.googleapis.com/v0/b/tu-chamba-cf127.appspot.com/o/machineSew.png?alt=media&token=5fc8c817-2515-4ea8-bf09-231e89fa5d62"
        alt="logo"
      />
      Coser y Camellar
    </a>
    <div
      class="w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0 dark:bg-gray-800 dark:border-gray-700"
    >
      <div class="p-6 space-y-4 md:space-y-6 sm:p-8">
        <div class="gap-y-5">
          <h1
            class="text-xl font-bold leading-tight tracking-tight text-gray-900 md:text-2xl dark:text-white"
          >
            Registrate
          </h1>
          <div class="flex flex-col gap-3 mt-4">
            <app-google-button
              (onClick)="submitWithGoogle()"
            ></app-google-button>
            <!-- <app-facebook-button (onClick)="submitWithFacebook()"></app-facebook-button> -->
          </div>
        </div>

        <!-- Selector de método de registro -->
        <!-- ToDo: Se comenta mientrás a futuro se implementa la opción de telefono -->
        <!-- <div class="flex justify-center gap-4 mt-4">
          <button
            (click)="setAuthMethod('email')"
            [class.bg-blue-600]="authMethod === 'email'"
            [class.text-white]="authMethod === 'email'"
            class="px-4 py-2 rounded-lg border border-blue-600 hover:bg-blue-50"
          >
            Email
          </button>
          <button
            (click)="setAuthMethod('phone')"
            [class.bg-blue-600]="authMethod === 'phone'"
            [class.text-white]="authMethod === 'phone'"
            class="px-4 py-2 rounded-lg border border-blue-600 hover:bg-blue-50"
          >
            Teléfono
          </button>
        </div> -->

        <!-- Formulario de Email -->
        <form
          *ngIf="authMethod === 'email'"
          class="space-y-4 md:space-y-6"
          [formGroup]="form"
          (ngSubmit)="submit()"
        >
          <div>
            <label
              for="email"
              class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >
              Tu correo
            </label>
            <input
              type="email"
              name="email"
              id="email"
              class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              placeholder="nombre@empresa.com"
              formControlName="email"
            />
            @if(isEmailValid()){
            <small class="text-red-400"
              >El correo no está en formato valido</small
            >
            } @if (isRequired('email')) {
            <small class="text-red-400">Este campo es requerido</small>
            }
          </div>
          <div>
            <label
              for="password"
              class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >
              Contraseña
            </label>
            <input
              type="password"
              name="password"
              id="password"
              placeholder="••••••••"
              class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              formControlName="password"
            />
            @if (isRequired('password')) {
            <small class="text-red-400">Este campo es requerido</small>
            } @if (isMinLength()){
            <small class="text-red-400"
              >La contraseña debe tener mínimo 6 caracteres</small
            >
            }
          </div>
          <div>
            <label
              for="phone"
              class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >
              Tu número de teléfono
            </label>
            <input
              type="tel"
              name="phone"
              id="phone"
              type="number"
              class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
              placeholder="3001234567"
              formControlName="phone"
            />
            @if (isRequired('phone')) {
            <small class="text-red-400">Este campo es requerido</small>
            }
          </div>
          <button
            type="submit"
            class="w-full text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"
          >
            Registrarme
          </button>
        </form>

        <!-- Formulario de Teléfono -->
        <form
          *ngIf="authMethod === 'phone'"
          class="space-y-4 md:space-y-6"
          [formGroup]="phoneForm"
          (ngSubmit)="submitPhone()"
        >
          <div>
            <label
              for="phone"
              class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >
              Número de teléfono
            </label>
            <input
              type="tel"
              name="phone"
              id="phone"
              class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"
              placeholder="+573003123456"
              formControlName="phone"
            />
            @if (isRequired('phone')) {
            <small class="text-red-400">Este campo es requerido</small>
            }
          </div>

          <!-- Contenedor para el reCAPTCHA -->
          <div #phoneSignIn id="phoneSignIn"></div>

          <!-- Campo de verificación (aparece después de enviar el código) -->
          <div *ngIf="codeSent">
            <label
              for="verificationCode"
              class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
            >
              Código de verificación
            </label>
            <input
              type="text"
              name="verificationCode"
              id="verificationCode"
              class="bg-gray-50 border border-gray-300 text-gray-900 rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"
              placeholder="123456"
              formControlName="verificationCode"
            />
          </div>

          <button
            type="submit"
            class="w-full text-white bg-blue-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"
          >
            {{ codeSent ? "Verificar código" : "Enviar código" }}
          </button>
        </form>

        <p class="text-sm font-light text-gray-500 dark:text-gray-400">
          Al registrarte, aceptas nuestras
          <a
            routerLink="/works/politicas"
            class="font-medium text-primary-600 hover:underline dark:text-primary-500"
          >
            políticas de tratamiento de datos </a
          >.
        </p>
        <p class="text-sm font-light text-gray-500 dark:text-gray-400">
          Ya tienes cuenta?
          <a
            routerLink="/auth/sign-in"
            class="font-medium text-primary-600 hover:underline dark:text-primary-500"
          >
            Inicia sesión
          </a>
        </p>
      </div>
    </div>
    <!-- Sección del video tutorial -->
    <div class="mt-8 w-full max-w-2xl">
      <h2
        class="text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center"
      >
        Mira nuestro video tutorial para registrarte
      </h2>
      <div
        style="
          position: relative;
          width: 100%;
          padding-bottom: 56.25%; /* Relación de aspecto 16:9 */
          height: 0;
          overflow: hidden;
        "
      >
        <iframe
          src="https://www.youtube.com/embed/ppUgi7Xhf0Y?start=1"
          title="Tutorial Coser & Camellar"
          style="
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
          "
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>
    </div>
  </div>
</section>
